<div class="container">
  <div style= "text-align: center;">
    <p>
      <%= attachment_image_tag @photo_image, :image, class:"card-img-top"; %>
    </p>
    <table border="1">
      <tbody>
        <tr>
          <td>
            <%= attachment_image_tag @photo_image.user, :profile_image, :fill, 60, 60, fallback: "no_image.jpg", class:"mt-3 rounded-circle" %>
            <%= @photo_image.user.name %>
            <%= @photo_image.created_at.strftime('%Y/%m/%d') %>
            <i class="fas fa-image"></i><%= @photo_image.name %>
            <i class="fas fa-feather-alt"></i><%= @photo_image.caption %>
            <% if @photo_image.user == current_user %>
              <%= link_to "編集", edit_photo_image_path(@photo_image), class: "btn btn-sm btn-success" %>
              <%= link_to "削除", photo_image_path(@photo_image), class: "btn btn-sm btn-danger", method: :delete %>
            <% end %>
          </td>
          <!--idを用いる（1ビュー内で同名のidは存在してはいけないため）-->
          <!--クラス名を一意性があるものにする-->
          <td id="photo_image_<%= @photo_image.id %>" class="favorite-btn"><%= render "favorites/favorite-btn", photo_image: @photo_image %></td>
          <td class="comments-count"><i class="far fa-comment-alt"></i>コメント数: <%= @photo_image.comments.count %></td>
        </tr>
      </tbody>
    </table>
    <div class="comments">
      <%= render 'comments/index', photo_image: @photo_image %>
    </div>
    <!--コメント欄-->
    <div style= "text-align: left;">
      <%= form_with(model:[@photo_image, @comment]) do |f| %>
        <%= f.text_area :comment, rows:'5',placeholder: "コメントをここに" %>
        <%= f.submit "コメントする", class: "btn btn-sm btn-success" %>
      <% end %>
    </div>
  </div>
</div>
